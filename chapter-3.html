
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Reinforcement Learning &#8212; MENACE Revisited</title>
    
  <link rel="stylesheet" href="_static/css/index.73d71520a4ca3b99cfee5594769eaaae.css">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/sphinx-book-theme.40e2e510f6b7d1648584402491bb10fe.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.3da636dd464baa7582d2.js">

    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.d31b09fe5c1d09cb49b26a786de4a05d.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Reinforcement Learning with MENACE" href="chapter-4.html" />
    <link rel="prev" title="Exploring Dyalog APL" href="chapter-2.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="index.html">
  
  
  <h1 class="site-logo" id="site-title">MENACE Revisited</h1>
  
</a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="an-introduction.html">
   MENACE in APL
  </a>
 </li>
</ul>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="chapter-1.html">
   Reinforcement Learning from the ground up
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chapter-2.html">
   Exploring Dyalog APL
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Reinforcement Learning
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chapter-4.html">
   Reinforcement Learning with MENACE
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chapter-5.html">
   Paying the game
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="about-the-author.html">
   About the author
  </a>
 </li>
</ul>

</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/chapter-3.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

        <!-- Source interaction buttons -->


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/executablebooks/jupyter-book/master?urlpath=tree/chapter-3.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exploring-menace-in-apl">
   Exploring MENACE in APL
  </a>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="reinforcement-learning">
<h1>Reinforcement Learning<a class="headerlink" href="#reinforcement-learning" title="Permalink to this headline">¶</a></h1>
<div class="section" id="exploring-menace-in-apl">
<h2>Exploring MENACE in APL<a class="headerlink" href="#exploring-menace-in-apl" title="Permalink to this headline">¶</a></h2>
<p>Michie’s MENACE used machboxes to remember waht had happened in previous games. Michie used one matchbox for each possible board configuration, and the player picked a coloured bead at random to decide what move to make.</p>
<p>How many relevant board configurations are there?</p>
<p>This isn’t a trivial question, since many board configurations could never be reached in play.</p>
<p>Theree’s an obvious upper limit, though. We can count all the board configurations without considering whether they could be reached.</p>
<p>Each square of the board can be empty, contain a nought or contain a cross. There are three possibilities for each of the nine cells, so there are three to the power 9 in total.</p>
<p>Here’s how we calculate that in APL. Note that exponentiation is represented by * in APL. (APL uses × for multiplication.)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">3</span><span class="o">*</span><span class="m">9</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">done
</span></div><div class="output text_html"><span style="white-space:pre; font-family: monospace">19683
</span></div></div>
</div>
<p>It’s interesting to know how many positions there are, but we’ll need to eliminate the ones that are impossible or redundant.</p>
<p>We need some way of representing a board position.</p>
<p>We can <em>visualise</em> each board position as a 3 by 3 matrix of characters: a <code class="docutils literal notranslate"><span class="pre">×</span></code> for a cross, a <code class="docutils literal notranslate"><span class="pre">○</span></code> for a nought, and  a <code class="docutils literal notranslate"><span class="pre">.</span></code> for an unfilled square. That means that an empty board does not just look like white space.</p>
<p>Suppose the first player placed an ‘x’ in the centre.
We could create that board like this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">3</span> <span class="m">3</span><span class="o">⍴</span><span class="s1">&#39;....×....&#39;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">...
.×.
...
</span></div></div>
</div>
<p>In APL we create character literals by enclosing their characters in single quotation marks. The result is a character <em>vector</em> (a list of characters). We can create a matrix by asking APL to reshape the vector. <code class="docutils literal notranslate"><span class="pre">⍴</span></code> stands for <em>reshape</em>; it reshapes the array on its right using the shape on its right.</p>
<p>That way of displaying a board position is great for humans, but there are better ways to represent a board in an APL program. The way we’ll do it is to represent a board as a numeric vector. The vector will have a zero for an unfilled position, a 1 for an <code class="docutils literal notranslate"><span class="pre">×</span></code> and a 2 for a <code class="docutils literal notranslate"><span class="pre">○</span></code>.</p>
<p>The board we saw above would be represented by the vector <code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">0</span> <span class="pre">0</span> <span class="pre">0</span> <span class="pre">1</span> <span class="pre">0</span> <span class="pre">0</span> <span class="pre">0</span> <span class="pre">0</span></code>.</p>
<p>How can we convert that to something we can visualise? We’ll need to use the vector as an index to an array of characters. As you may know, the mathematical world is divied about how to index things. Pure mathematicians tend to count from 0, but applied mathematicians often count from 1.</p>
<p>APL supports both approaches. You tell APL which you want to use by setting the <em>index origin</em> to 0 or 1.</p>
<p>In APL, the index origin is a system variable called ⎕io. The line below sets it to 0.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nf">⎕io</span> <span class="kd">←</span> <span class="m">0</span>
</pre></div>
</div>
</div>
</div>
<p>As you can see, in APL, <code class="docutils literal notranslate"><span class="pre">←</span></code> is used for assignment. (The <code class="docutils literal notranslate"><span class="pre">=</span></code> symbol is only used to test for equality.)</p>
<p>Here’s the code to convert the vector <code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">0</span> <span class="pre">0</span> <span class="pre">0</span> <span class="pre">1</span> <span class="pre">0</span> <span class="pre">0</span> <span class="pre">0</span> <span class="pre">0</span></code> to a human-friendly board position.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">3</span> <span class="m">3</span><span class="o">⍴</span><span class="s1">&#39;.×○&#39;</span><span class="sr">[</span><span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">1</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span><span class="sr">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">...
.×.
...
</span></div></div>
</div>
<p>We’re going to use that expression whenever we want to  turn a board vector into a human-friendly diagram.</p>
<p>We can use APL’s <em>direct definition</em> to create a function which we can use repeatedly.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">show</span> <span class="kd">←</span> <span class="kt">{</span><span class="m">3</span> <span class="m">3</span><span class="o">⍴</span><span class="s1">&#39;.×○&#39;</span><span class="sr">[</span><span class="bp">⍵</span><span class="sr">]</span><span class="kt">}</span>
<span class="nv">show</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">1</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> 
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">...
.×.
...
</span></div></div>
</div>
<p>How can we generate all the 19683 board positions?</p>
<p>The first step is to generate all the numbers from 0 to 19682.</p>
<p>In APL we can do that using <code class="docutils literal notranslate"><span class="pre">⍳</span></code>. IN the lines below, we’ll store the list of numbers in a vaiable called <code class="docutils literal notranslate"><span class="pre">boards</span></code> and then display the first 6 numbers just to check that APL did what we wanted.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">boards</span> <span class="kd">←</span> <span class="o">⍳</span><span class="m">19683</span>
<span class="nv">boards</span><span class="sr">[</span><span class="m">0</span> <span class="m">1</span> <span class="m">2</span> <span class="m">3</span> <span class="m">4</span> <span class="m">5</span><span class="sr">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">0 1 2 3 4 5
</span></div></div>
</div>
<p>That looks good.</p>
<p>We picked the first six elements of <code class="docutils literal notranslate"><span class="pre">boards</span></code> using indexing, but there’s an easier way. We can use APL’s <em>take</em> function.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">6</span><span class="o">↑</span><span class="nv">boards</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">0 1 2 3 4 5
</span></div></div>
</div>
<p>How can we convert those numbers to board positions?</p>
<p>We can use a <em>primitive</em> (built-in) APL function called encode <code class="docutils literal notranslate"><span class="pre">⊤</span></code> which converts an integer to a representation in any number base we chose. We’ll convert each number to its <em>ternary</em> (base 3) representation.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">encoded</span> <span class="kd">←</span> <span class="p">(</span><span class="m">9</span><span class="o">⍴</span><span class="m">3</span><span class="p">)</span><span class="o">⊤</span><span class="nv">boards</span>
</pre></div>
</div>
</div>
</div>
<p>What’s the result? We won’t display it, since it contains a large array, but we can find out its shape.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍴</span><span class="nv">encoded</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">9 19683
</span></div></div>
</div>
<p>Earlier we used <code class="docutils literal notranslate"><span class="pre">⍴</span></code> with a shape on the left and and an array on the right to reshape a vector into a matrix. Here we used <code class="docutils literal notranslate"><span class="pre">⍴</span></code> with just an array on the right. Used that way, <code class="docutils literal notranslate"><span class="pre">⍴</span></code> returns the shape of the array.</p>
<p>We can use <code class="docutils literal notranslate"><span class="pre">↑</span></code> to take 9 rows and 6 columns from the encoded matrix.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">9</span> <span class="m">6</span><span class="o">↑</span><span class="nv">encoded</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">0 0 0 0 0 0
0 0 0 0 0 0
0 0 0 0 0 0
0 0 0 0 0 0
0 0 0 0 0 0
0 0 0 0 0 0
0 0 0 0 0 0
0 0 0 1 1 1
0 1 2 0 1 2
</span></div></div>
</div>
<p>Each column is a board position. It feels more natural to have the board positions as rows, and APL has a handy transpose function <code class="docutils literal notranslate"><span class="pre">⍉</span></code> which will do the job.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍉</span><span class="m">9</span> <span class="m">6</span><span class="o">↑</span><span class="nv">encoded</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 1
0 0 0 0 0 0 0 0 2
0 0 0 0 0 0 0 1 0
0 0 0 0 0 0 0 1 1
0 0 0 0 0 0 0 1 2
</span></div></div>
</div>
<p>We’re going to do a lot of encoding, so it makes sense to create an <code class="docutils literal notranslate"><span class="pre">encode</span></code> function we can use repeatedly.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">encode</span> <span class="kd">←</span> <span class="kt">{</span><span class="o">⍉</span><span class="p">(</span><span class="m">9</span><span class="o">⍴</span><span class="m">3</span><span class="p">)</span><span class="o">⊤</span><span class="bp">⍵</span><span class="kt">}</span> <span class="c1">⍝ integer(s) to board vector/matrix</span>
</pre></div>
</div>
</div>
</div>
<p>Lets’ try that out.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">encode</span> <span class="o">⍳</span><span class="m">6</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 1
0 0 0 0 0 0 0 0 2
0 0 0 0 0 0 0 1 0
0 0 0 0 0 0 0 1 1
0 0 0 0 0 0 0 1 2
</span></div></div>
</div>
<p>Later on we will want to go in the opposite direction from a vector or vectors to the numbers that correspond to each one.</p>
<p>The function <code class="docutils literal notranslate"><span class="pre">decode</span></code> does that.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">decode</span> <span class="kd">←</span> <span class="kt">{</span><span class="m">3</span><span class="o">⊥⍉</span><span class="bp">⍵</span><span class="kt">}</span> 
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">decode</span> <span class="nv">encode</span> <span class="o">⍳</span><span class="m">6</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">0 1 2 3 4 5
</span></div></div>
</div>
<p>What do these boards look like? Let’s try to use the show function we wrote earlier.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">show</span> <span class="nv">encode</span> <span class="o">⍳</span><span class="m">6</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">...
...
...
</span></div></div>
</div>
<p>Oops! That just shows the first board position, which is rather boring, and not what we wanted. The current definition of <code class="docutils literal notranslate"><span class="pre">show</span></code> uses <code class="docutils literal notranslate"><span class="pre">3</span> <span class="pre">3⍴</span></code> to generate its result, so we only ever get 9 characters arranged as a 3 by 3 matrix. We need to modify <code class="docutils literal notranslate"><span class="pre">show</span></code> so that it displays each board.</p>
<p>We’ll use APL’s <code class="docutils literal notranslate"><span class="pre">rank</span></code> operator <code class="docutils literal notranslate"><span class="pre">⍤</span></code> which we can use to control how the code is applied to the function’s argument.</p>
<p>In this case we want <code class="docutils literal notranslate"><span class="pre">show</span></code> to apply to each vector along the last dimension of the argument we provide.</p>
<p><code class="docutils literal notranslate"><span class="pre">3</span> <span class="pre">3⍴⍤</span> <span class="pre">1</span></code> allows us to do that. The <code class="docutils literal notranslate"><span class="pre">⊢</span></code> just serves to separate the <code class="docutils literal notranslate"><span class="pre">1</span></code> used with rank from the code that picks the characters to use as an argument.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">show</span> <span class="kd">←</span> <span class="kt">{</span><span class="m">3</span> <span class="m">3</span><span class="o">⍴</span><span class="na">⍤</span> <span class="m">1</span> <span class="o">⊢</span><span class="s1">&#39;.×○&#39;</span><span class="sr">[</span><span class="bp">⍵</span><span class="sr">]</span><span class="kt">}</span>
<span class="nv">show</span> <span class="nv">encode</span> <span class="o">⍳</span><span class="m">6</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">...
...
...

...
...
..×

...
...
..○

...
...
.×.

...
...
.××

...
...
.×○
</span></div></div>
</div>
<p>Let’s look at the shape of show’s result.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍴</span><span class="nv">show</span> <span class="nv">encode</span> <span class="o">⍳</span><span class="m">6</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">6 3 3
</span></div></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">show</span></code> now converts each vector on its right to a matrix. If we apply <code class="docutils literal notranslate"><span class="pre">show</span></code> to a matrix with one board per row it returns a 3d array with one plane for each board configuration.</p>
<p>If there aren’t too many boards it can be easier to see the positions going <em>across</em> the page rather than down it.</p>
<p>There’s an easy way to do that.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⊂</span><span class="na">⍤</span><span class="m">2</span> <span class="nv">show</span> <span class="nv">encode</span> <span class="o">⍳</span><span class="m">6</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌───┬───┬───┬───┬───┬───┐
│...│...│...│...│...│...│
│...│...│...│...│...│...│
│...│..×│..○│.×.│.××│.×○│
└───┴───┴───┴───┴───┴───┘
</span></div></div>
</div>
<p>The expression <code class="docutils literal notranslate"><span class="pre">⊂⍤2</span></code> converts the cube of characters returned by <code class="docutils literal notranslate"><span class="pre">show</span></code> into a vector (list) of matrices.</p>
<p>We’ve now created the tools we need to work on the next stage of our implementation of MENACE.</p>
<p>In the next notebook we will look at the relationship between symmetries (rotations and reflections) of board configurations.</p>
<p>We will want to use <code class="docutils literal notranslate"><span class="pre">encode</span></code> and <code class="docutils literal notranslate"><span class="pre">show</span></code> so we will save our work ready to reuse in the next notebook.</p>
<p><code class="docutils literal notranslate"><span class="pre">)save</span> <span class="pre">notebook3</span></code> is an APL <em>system command</em>. It saves the functions and variables we’ve created in a <em>workspace</em> file called <code class="docutils literal notranslate"><span class="pre">notebook2.dws</span></code>.</p>
<p>In this case we need to use the <code class="docutils literal notranslate"><span class="pre">-force</span></code> option because the notebook software silently loads a workspace with a different name.</p>
<p>APL will not change that name unless we tell it to.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">)</span><span class="nv">save</span> <span class="nv">notebook3</span> <span class="o">-</span><span class="nv">force</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">notebook3.dws saved Thu Dec 10 13:58:56 2020
</span></div></div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "dyalog-kernel"
        },
        kernelOptions: {
            kernelName: "dyalog-kernel",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'dyalog-kernel'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="chapter-2.html" title="previous page">Exploring Dyalog APL</a>
    <a class='right-next' id="next-link" href="chapter-4.html" title="next page">Reinforcement Learning with MENACE</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By The Jupyter Book community<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="_static/js/index.3da636dd464baa7582d2.js"></script>


    
  </body>
</html>